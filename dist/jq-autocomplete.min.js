(u=>{var n={treshold:4,maximumItems:5,highlightTyped:!0,highlightClass:"text-primary"};function c(e,t,l){var n;return l=l.highlightTyped?(n=t.label.toLowerCase().indexOf(e.toLowerCase()),t.label.substring(0,n)+'<span class="'+(e=>{if("string"==typeof e)return e;if(0==e.length)return"";for(var t="",l=0,n=e;l<n.length;l++)t+=n[l]+" ";return t.substring(0,t.length-1)})(l.highlightClass)+'">'+t.label.substring(n,n+e.length)+"</span>"+t.label.substring(n+e.length,t.label.length)):t.label,'<button type="button" class="dropdown-item" data-value="'+t.value+'">'+l+"</button>"}function o(e,t){var l=e.val();if(l.length<t.treshold)return h(e),0;for(var n=e.next(),o=(n.html(""),0),a=Object.keys(t.source),s=0;s<a.length;s++){var i=a[s],r=t.source[i],i={label:t.label?r[t.label]:i,value:t.value?r[t.value]:r};if(0<=i.label.toLowerCase().indexOf(l.toLowerCase())&&(n.append(c(l,i,t)),0<t.maximumItems)&&++o>=t.maximumItems)break}return e.next().find(".dropdown-item").click(function(){e.val(u(this).text()),t.onSelectItem&&t.onSelectItem({value:u(this).data("value"),label:u(this).text()},e[0]),h(e)}),n.children().length}function a(e){e.next().css({display:"block"})}function h(e){e.next().css({display:"none"})}u.fn.autocomplete=function(e){var t={},l=(u.extend(t,n,e),u(this)),e=(l.parent().find(".dropdown-menu").remove(),u('<div class="dropdown-menu"></div>'));return t.dropdownClass&&e.addClass(t.dropdownClass),e.css({position:"absolute",top:l.outerHeight(),left:0,display:"none"}),l.after(e),this.off("click.autocomplete").click("click.autocomplete",function(e){0==o(l,t)?(h(l),e.stopPropagation()):a(l)}),this.off("keyup.autocomplete").keyup("keyup.autocomplete",function(){(0<o(l,t)?a:h)(l)}),u(document).click(function(e){u(e.target).closest(l).length||h(l)}),this}})(jQuery);